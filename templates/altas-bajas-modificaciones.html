<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Art/dec</title>
    <link rel="stylesheet" href="../static/css/productos.css">
</head>
<body>
    <header>
        <div class="titulo-adm">
           <h1 class="ad">ART/DEC</h1>
        </div>
    </header>
    <br>
    <br>
    <main>
        <section>   
            <h1>Administraci칩n de productos</h1>
            <br>
            <h4 class="texto-titulo-producto">Sector para administrar los productos de cada 치rea.</h4>
            <form action="#" class="container-alt-baj-mod" id="form-productos" method="GET" novalidate >
                <div class="alta">
                    <div class="form-control-alt-baj-mod">
                        <label for="campo-category">Categoria</label>
                        <input type="text" required name="category" id="campo-category" class="campo-input" placeholder="Ingrese la categoria">
                    </div>
                    <div class="form-control-alt-baj-mod">
                        <label for="campo-name">Nombre</label>
                        <input type="text" required name="name" id="campo-name" class="campo-input" placeholder="Ingrese el nombre del producto">  
                    </div>
                    <div class="form-control-alt-baj-mod">
                        <label for="campo-price">Precio</label>
                        <input type="text" required name="price" id="campo-price" class="campo-input" placeholder="Ingrese el valor">
                    </div>
                    
                    <div class="form-control-alt-baj-mod">
                        <label for="campo-image">Imagen</label>
                        <input type="url" class="campo-input" required name="image" id="campo-image" placeholder="Ingrese la imagen del producto">  
                    </div>
                    <input type="hidden" name="id_product" id="id-product">
                    <div class="btn-agregar">
                        <button type="button" class="boton-agregar" id="btn-agregado"> 
                            <p class="texto-agregar">Agregar</p>   
                        </button>
                    </div>
                </div>
            </form>
        </section>
        <h3>Administraci칩n de modificaciones y eliminaci칩n de productos.</h3>
        <section class="container-productos" id="lista-producto">
            <table class="modificaciones" id="tabla-objeto-modificaciones">
                <thead>
                    <tr class="titulos">
                        <th class="texto-objeto-seleccionado">Categoria</th>
                        <th class="texto-objeto-seleccionado">Nombre</th>
                        <th class="texto-objeto-seleccionado">Precio</th>
                        <th class="texto-objeto-seleccionado">Imagen</th>
                        <th class="texto-objeto-seleccionado"></th>
                    </tr>
                </thead>
                <tbody id="tb-modificaciones">
                    <!-- aca se escribe codigo html desde js -->
                </tbody>
            </table>
        </section>
        <!-- <script>
            class Producto {            PASO TODO A PRODUCTOS.JS
                constructor(id, producto, precio, categoria, imagen) {
                    this.id = id;
                    this.producto = producto;
                    this.precio = precio;
                    this.categoria = categoria;
                    this.imagen = imagen;
                }
            }

            function muestraProductos() {
                let productossss = JSON.parse(localStorage.getItem('productossss')) || [];
                const tbModificacion = document.querySelector('#tb-modificaciones');
                tbModificacion.innerHTML = '';
                productossss.forEach(prod => {
                    const tr = `
                        <tr>
                            <td>${prod.producto}</td>
                            <td>${prod.precio}</td>
                            <td>${prod.categoria}</td>
                            <td>
                                <img src="${prod.imagen}" alt="${prod.producto}" width="80px" height="129px">
                            </td>
                            <td>
                                <button class="boton-borrar" onclick="borrarProducto(${prod.id})">BORRAR</button>
                                <button class="boton-modificar" onclick="editarProducto(${prod.id})">MODIFICAR</button>
                            </td>
                        </tr>
                    `;
                    tbModificacion.insertAdjacentHTML('beforeend', tr);
                });
            }

            function guardaProductos(event) {
                event.preventDefault();
                const entradaProducto = document.querySelector('#campo-producto');
                const entradaPrecio = document.querySelector('#campo-valor');
                const entradaCategoria = document.querySelector('#campo-categoria');
                const entradaImagen = document.querySelector('#campo-imagen');
                const idProducto = document.querySelector('#id-producto').value;

                let productossss = JSON.parse(localStorage.getItem('productossss')) || [];

                if (idProducto) {
                    // Editar producto existente
                    productossss = productossss.map(prod => {
                        if (prod.id == idProducto) {
                            return new Producto(
                                prod.id,
                                entradaProducto.value,
                                entradaPrecio.value,
                                entradaCategoria.value,
                                entradaImagen.value
                            );
                        }
                        return prod;
                    });
                } else {
                    // Agregar nuevo producto
                    const newProducto = new Producto(
                        productossss.length + 1,
                        entradaProducto.value,
                        entradaPrecio.value,
                        entradaCategoria.value,
                        entradaImagen.value
                    );
                    productossss.push(newProducto);
                }

                localStorage.setItem('productossss', JSON.stringify(productossss));
                muestraProductos();
                document.querySelector('#form-productos').reset();
                document.querySelector('#id-producto').value = '';
            }

            function borrarProducto(id) {
                let productossss = JSON.parse(localStorage.getItem('productossss')) || [];
                productossss = productossss.filter(prod => prod.id !== id);
                localStorage.setItem('productossss', JSON.stringify(productossss));
                muestraProductos();
            }

            function editarProducto(id) {
                let productossss = JSON.parse(localStorage.getItem('productossss')) || [];
                const producto = productossss.find(prod => prod.id === id);
                if (producto) {
                    document.querySelector('#campo-producto').value = producto.producto;
                    document.querySelector('#campo-valor').value = producto.precio;
                    document.querySelector('#campo-categoria').value = producto.categoria;
                    document.querySelector('#campo-imagen').value = producto.imagen;
                    document.querySelector('#id-producto').value = producto.id;
                }
            }

            document.addEventListener('DOMContentLoaded', function() {
                muestraProductos();
                document.querySelector('#form-productos').addEventListener('submit', guardaProductos);
            });
        </script> -->
        <!--<script src="../static/JS/productos.js"></script>  vinculo el codigo js de arriba con un archivo js separado-->
        <script src="../static/JS/productos-fetch.js"></script>  <!--vinculo con el nuevo servidor-->
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        
    </main>
    <br>
    <br>
    <br>
    <br>
    <br>
    <section>
        <div class="boton">
            <button class="boton-volver">
                <a href="../index.html" class="texto">Volver</a>
            </button>
        </div>
        <br>
        <br>
        <br>
        <br>
        <br>
    </section>
</body>
</html>